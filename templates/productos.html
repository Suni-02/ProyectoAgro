{% extends "index.html" %}

{% block content %}
<div class="max-w-4xl mx-auto mt-10">
  <h1 class="text-3xl font-bold mb-6 text-gray-800">Mis Productos</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {% for producto in productos %}
      <div class="bg-white shadow-md rounded-lg p-4">
        <h2 class="text-xl font-semibold text-gray-800">{{ producto[0] }}</h2>
        <p class="text-gray-600 mt-2"><span class="font-semibold">Precio:</span> ${{ producto[1] }}</p>
        <p class="text-gray-600"><span class="font-semibold">Vendedor:</span> {{ producto[2] }}</p>
        <p class="text-gray-600"><span class="font-semibold">Categoría:</span> {{ producto[3] }}</p>
        
        <div class="mt-4 flex gap-2">
          <!-- Botón editar con SweetAlert -->
          <button
            onclick="confirmarEdicion({{ producto[4] }})"
            class="flex items-center gap-1 bg-blue-600 text-white py-1 px-3 rounded hover:bg-blue-700 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
              <path d="M17.414 2.586a2 2 0 010 2.828l-9.586 9.586a1 1 0 01-.293.207l-4 2a1 1 0 01-1.32-1.32l2-4a1 1 0 01.207-.293l9.586-9.586a2 2 0 012.828 0zM15 4l1 1-9.293 9.293-1-1L15 4z" />
            </svg>
            Editar
          </button>
          
          <!-- Botón eliminar con SweetAlert -->
          <button
            onclick="confirmarEliminacion({{ producto[4] }})"
            class="flex items-center gap-1 bg-red-600 text-white py-1 px-3 rounded hover:bg-red-700 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3m5 0H6" />
            </svg>
            Eliminar
          </button>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<!-- Librería SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  function confirmarEliminacion(idProducto) {
    Swal.fire({
      title: '¿Estás seguro?',
      text: '¡Esta acción no se puede deshacer!',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Sí, eliminar',
      cancelButtonText: 'Cancelar'
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = '/eliminar_producto/' + idProducto;
      }
    });
  }

  function confirmarEdicion(idProducto) {
    Swal.fire({
      title: 'Editar producto',
      text: '¿Deseas editar este producto?',
      icon: 'question',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#aaa',
      confirmButtonText: 'Sí, editar',
      cancelButtonText: 'Cancelar'
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = '/editar_producto/' + idProducto;
      }
    });
  }
</script>
{% endblock %}
